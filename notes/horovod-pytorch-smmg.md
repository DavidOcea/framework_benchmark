# Horovod + Pytorch 单机多卡标准测试
## 一、主机环境
### 1.主机硬件介绍
OS:ubuntu16.04   
CUDA:10.0   
cuDNN：7.4   

```
nvidia-smi
Sun May 12 17:45:27 2019       
+-----------------------------------------------------------------------------+
| NVIDIA-SMI 410.78       Driver Version: 410.78       CUDA Version: 10.0     |
|-------------------------------+----------------------+----------------------+
| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |
| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |
|===============================+======================+======================|
|   0  GeForce RTX 208...  Off  | 00000000:04:00.0 Off |                  N/A |
| 27%   47C    P2    66W / 250W |   3843MiB / 10989MiB |      6%      Default |
+-------------------------------+----------------------+----------------------+
|   1  GeForce RTX 208...  Off  | 00000000:05:00.0 Off |                  N/A |
| 22%   32C    P8    21W / 250W |     10MiB / 10989MiB |      0%      Default |
+-------------------------------+----------------------+----------------------+
|   2  GeForce RTX 208...  Off  | 00000000:06:00.0 Off |                  N/A |
| 22%   35C    P8    19W / 250W |     10MiB / 10989MiB |      0%      Default |
+-------------------------------+----------------------+----------------------+
|   3  GeForce RTX 208...  Off  | 00000000:07:00.0 Off |                  N/A |
| 22%   35C    P8    20W / 250W |     10MiB / 10989MiB |      0%      Default |
+-------------------------------+----------------------+----------------------+
|   4  GeForce RTX 208...  Off  | 00000000:08:00.0 Off |                  N/A |
| 22%   34C    P8    21W / 250W |     10MiB / 10989MiB |      0%      Default |
+-------------------------------+----------------------+----------------------+
|   5  GeForce RTX 208...  Off  | 00000000:0B:00.0 Off |                  N/A |
| 22%   34C    P8    20W / 250W |     10MiB / 10989MiB |      0%      Default |
+-------------------------------+----------------------+----------------------+
|   6  GeForce RTX 208...  Off  | 00000000:0C:00.0 Off |                  N/A |
| 22%   34C    P8    13W / 250W |     10MiB / 10989MiB |      0%      Default |
+-------------------------------+----------------------+----------------------+
|   7  GeForce RTX 208...  Off  | 00000000:0D:00.0 Off |                  N/A |
| 22%   34C    P8    14W / 250W |     10MiB / 10989MiB |      0%      Default |
+-------------------------------+----------------------+----------------------+
|   8  GeForce RTX 208...  Off  | 00000000:0E:00.0 Off |                  N/A |
| 22%   36C    P8    26W / 250W |     10MiB / 10989MiB |      0%      Default |
+-------------------------------+----------------------+----------------------+
|   9  GeForce RTX 208...  Off  | 00000000:0F:00.0 Off |                  N/A |
| 22%   33C    P8    21W / 250W |     10MiB / 10989MiB |      0%      Default |
+-------------------------------+----------------------+----------------------+
                                                                               
+-----------------------------------------------------------------------------+
| Processes:                                                       GPU Memory |
|  GPU       PID   Type   Process name                             Usage      |
|=============================================================================|
|    0     38312      C   ../../build/tools/caffe                     3833MiB |
+-----------------------------------------------------------------------------+

```
### 2.安装环境
参考：https://github.com/fusimeng/Horovod/blob/master/notes/install.md   
### 3.代码结构 
```
-horovod
--pytorch_mnist.py
```

### 4.用法
```
$ horovodrun -np 4 -H localhost:4 python pytorch_mnist.py
```
[日志](../horovod/horovod_log1.md)
## 二、Docker环境
同上